(this["webpackJsonplofi-moods-admin"]=this["webpackJsonplofi-moods-admin"]||[]).push([[0],{48:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(11),r=n.n(c),s=n(40),a=n.n(s),i=(n(48),n(0)),o=n.n(i),u=n(3),l=n(9),d=(n(50),n(17)),f=(n(51),n(52),n(5));function b(){return Object(f.jsx)("div",{className:"loader-container",children:Object(f.jsx)("div",{className:"mini-loader"})})}function p(){return Object(f.jsx)("div",{className:"loader-container",children:Object(f.jsx)("div",{className:"loader"})})}var j=n(19),m=n.n(j),h=n(1);function O(e){var t=e.icon,n=e.message,c=e.duration;m.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:null!==c&&void 0!==c?c:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",m.a.stopTimer),e.addEventListener("mouseleave",m.a.resumeTimer)}}).fire({icon:t,title:n})}var v=function e(){Object(h.a)(this,e)};v.errorAlert=function(e,t){O({icon:"error",message:e,duration:t})},v.textInputAlert=function(e,t){m.a.fire({icon:"question",title:e,input:"text",showCancelButton:!0}).then((function(e){e.isConfirmed&&t(e.value)}))},v.successAlert=function(e,t){O({icon:"success",message:e,duration:t})},v.confirmDialog=function(e){var t=e.question,n=e.onConfirm,c=e.confirmButtonColor;m.a.fire({icon:"question",title:t,showCancelButton:!0,confirmButtonColor:null!==c&&void 0!==c?c:"red"}).then((function(e){e.isConfirmed&&n()}))},v.getById=function(e){return document.getElementById(e)},v.inputGetter=function(e){return document.getElementById(e).value};var x=n.p+"static/media/add.776ab686.svg",g=n.p+"static/media/trash.592bd856.svg",w=n(21);function y(e){var t=e.show,n=e.selected,r=e.addMusic,s=e.search,a=e.deleteMoodFromState,i=Object(c.useState)(!1),d=Object(l.a)(i,2),b=d[0],p=d[1],j=Object(c.useState)(!1),h=Object(l.a)(j,2),O=h[0],y=h[1];function C(){return(C=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p((function(){return!0})),e.next=3,z.addMusic(t);case 3:n=e.sent,p((function(){return!1})),n.success?(r(n.data),v.successAlert(n.message,1e3)):v.errorAlert(n.message,1e3);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return M=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y((function(){return!0})),e.next=3,z.deleteMood(n);case 3:(t=e.sent).success?(a(n),v.successAlert(t.message)):v.errorAlert(t.message),y((function(){return!1}));case 6:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}return t?Object(f.jsxs)("div",{className:"action-bar",children:[Object(f.jsxs)("span",{className:"search-bar",children:[Object(f.jsx)("input",{type:"text",className:"search-field",id:"search-field",onChange:function(e){s(e.target.value)}}),Object(f.jsx)("div",{className:"action-button",title:"Search",onClick:function(){return s(document.getElementById("search-field").value)},children:Object(f.jsx)("h4",{children:"Search"})})]}),Object(f.jsxs)("div",{className:"action-button-container",children:[Object(f.jsx)(k,{onClick:function(){return M.apply(this,arguments)},isLoading:O,text:"Delete Mood",icon:g}),Object(f.jsx)(k,{onClick:function(){m.a.fire({title:"Enter Details",html:'<span class="swal2-input-label">Title</span><input id="musicTitle" class="swal2-input"><span class="swal2-input-label">Owner</span><input id="musicOwner" class="swal2-input"><span class="swal2-input-label">link</span><input id="musicLink" class="swal2-input"/><div id="empty" class="error-text"> </div>',showCancelButton:!0,preConfirm:function(){var e=v.inputGetter("musicTitle").trim(),t=v.inputGetter("musicOwner").trim(),n=v.inputGetter("musicLink").trim();v.getById("musicTitle").value=e,v.getById("musicOwner").value=t,v.getById("musicLink").value=n,e=e.trim(),t=t.trim(),n=n.trim();var c=e.length>0&&t.length>0&&n.length>0;return v.getById("empty").innerHTML=c?" ":"Complete all fields",c}}).then((function(e){e.isConfirmed&&function(e){C.apply(this,arguments)}({title:v.inputGetter("musicTitle"),owner:v.inputGetter("musicOwner"),link:v.inputGetter("musicLink"),mood:n,dateAdded:w.a.now()})}))},isLoading:b,text:"Add",icon:x})]})]}):Object(f.jsx)("span",{})}function k(e){var t=e.onClick,n=e.isLoading,c=e.text,r=e.icon;return Object(f.jsxs)("span",{className:"action-button",title:c,onClick:function(){t()},children:[n?Object(f.jsx)(b,{}):Object(f.jsx)("img",{src:r,alt:c,className:"icon"}),Object(f.jsxs)("h4",{children:[c," "]})]})}var C=n(28),M=n(41),N=n.n(M),S=n.p+"static/media/play.20181f97.svg",B=n.p+"static/media/pause.7eb12db0.svg",A=n(42),E=n.n(A);function I(e){var t=e.music,n=e.deleteMe,r=Object(c.useState)(!1),s=Object(l.a)(r,2),a=s[0],i=s[1],d=Object(c.useState)(!1),p=Object(l.a)(d,2),j=p[0],m=p[1],h=Object(c.useState)(!1),O=Object(l.a)(h,2),x=O[0],y=O[1],k=Object(c.useState)(t),M=Object(l.a)(k,2),A=M[0],I=M[1],L=Object(c.useState)(S),F=Object(l.a)(L,2),T=F[0],D=F[1],G=Object(c.useState)(0),P=Object(l.a)(G,2),q=P[0],R=P[1],W=Object(c.useState)(0),_=Object(l.a)(W,2),J=_[0],K=_[1],Q=Object(c.useRef)(null),X=Object(c.useRef)(null);function Y(){return Y=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.confirmDialog({question:"Are you sure you want to delete this music?",onConfirm:function(){var e=Object(u.a)(o.a.mark((function e(){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i((function(){return!0})),e.next=3,z.deleteMusic(t);case 3:c=e.sent,i((function(){return!1})),c.success?(v.successAlert(c.message),n(A.id)):v.errorAlert(c.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),confirmButtonColor:"red"});case 1:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function H(e,t,n){return V.apply(this,arguments)}function V(){return(V=Object(u.a)(o.a.mark((function e(t,n,c){var r,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){v.getById(s).textContent=A[n].toString()},e.next=3,z.updateMusic(A,n,c);case 3:r=e.sent,s="".concat(n,"-").concat(A[n]),c=c.trim(),A[n]===c?a():c.length<=0?(v.errorAlert("Invalid input",1e3),a()):r.success?(v.successAlert("Edited successfully",1e3),I((function(e){var t=Object(C.a)({},e);return t[n]=c,t}))):(v.errorAlert("Failed to edit value",1e3),a());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(w.a.now()),Object(f.jsxs)("div",{className:"content-item",children:[Object(f.jsxs)("div",{className:"content-item-container",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{id:"title-".concat(A.title),contentEditable:!0,className:"break-word subtle-hover-grow",suppressContentEditableWarning:!0,spellCheck:!1,onBlur:function(e){H(A.id,"title",e.target.textContent)},children:A.title}),Object(f.jsx)("h4",{id:"owner-".concat(A.owner),contentEditable:!0,className:"break-word subtle-hover-grow",suppressContentEditableWarning:!0,spellCheck:!1,onBlur:function(e){H(A.id,"owner",e.target.textContent)},children:A.owner}),Object(f.jsx)("small",{children:Object(f.jsx)("h5",{id:"link-".concat(A.link),contentEditable:!0,className:"break-word subtle-hover-grow",suppressContentEditableWarning:!0,spellCheck:!1,onBlur:function(e){H(A.id,"link",e.target.textContent)},children:A.link})})]}),Object(f.jsxs)("div",{className:"thumb-icon",children:[Object(f.jsx)("img",{className:"thumbnail",src:"https://i.ytimg.com/vi/".concat(A.link,"/mqdefault.jpg"),alt:"thumbnail"}),Object(f.jsxs)("div",{className:"icon-container",children:[Object(f.jsx)("div",{className:"bg-red icon-button",onClick:function(){return function(){return Y.apply(this,arguments)}()},children:a?Object(f.jsx)(b,{}):Object(f.jsx)("img",{className:"icon ",src:g,alt:"delete"})}),Object(f.jsx)("div",{className:"bg-green icon-button",onClick:function(){return x?function(){}:m((function(e){return!e}))},children:x?Object(f.jsx)(b,{}):Object(f.jsx)("img",{className:"icon",src:T,alt:"play"})})]})]}),Object(f.jsx)(E.a,{ref:Q,onBuffer:function(){return y((function(){return!0}))},onBufferEnd:function(){return y((function(){return!1}))},className:"react-player",url:"https://www.youtube.com/watch?v=".concat(A.link),onStart:function(){},onError:function(){return v.errorAlert("something went wrong while fetching music make sure you added a valid link to the resource")},onPlay:function(){return D((function(){return B}))},onPause:function(){return D((function(){return S}))},controls:!1,playing:j,loop:!0,onProgress:function(e){return K((function(){return e.playedSeconds/q*100}))},onDuration:function(e){return R((function(){return e}))},config:{playerVars:{height:"144px",width:"256px",vq:"small"}}})]}),J>0?Object(f.jsx)("div",{ref:X,className:"progress-bar-container",onClick:function(e){var t=X.current.getBoundingClientRect(),n=t.width,c=e.pageX-t.x;x||Q.current.seekTo(c/n)},children:Object(f.jsx)(N.a,{borderRadius:"0 0 24px 0",transitionDuration:"200",height:"8px",bgColor:"#11496c",className:"progress-bar",completed:J,customLabel:" "})}):""]})}function L(e){var t=e.selected,n=e.deleteMoodFromState,r=Object(c.useState)([]),s=Object(l.a)(r,2),a=s[0],i=s[1],b=Object(c.useState)(!0),j=Object(l.a)(b,2),m=j[0],h=j[1],O=Object(c.useState)(""),x=Object(l.a)(O,2),g=x[0],w=x[1];function k(e){i((function(){return a.filter((function(t){return t.id!==e}))}))}Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h((function(){return!0})),e.next=3,z.fetchMusic(t);case 3:(n=e.sent).success?i((function(){return n.data})):v.errorAlert(n.message),h((function(){return!1}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}void 0!==t&&function(){e.apply(this,arguments)}()}),[t]);function C(){var e=[];return""!==g?a.forEach((function(t){t.title.trim().toLowerCase().includes(g.trim().toLowerCase())&&e.push(M(t))})):e=a.map((function(e){return M(e)})),e}function M(e){return Object(f.jsx)(I,{music:e,deleteMe:k},e.id)}return Object(f.jsxs)("div",{id:"content",children:[Object(f.jsx)(y,{show:void 0!==t,selected:t,addMusic:function(e){i((function(t){return[e].concat(Object(d.a)(t))}))},playList:a,search:function(e){return w((function(){return e}))},deleteMoodFromState:n}),void 0!==t?Object(f.jsx)("div",{className:"content-container",children:m?Object(f.jsx)(p,{}):a.length>0?C().map((function(e){return e})):Object(f.jsx)("h3",{className:"content-message",children:"There are no items in this list"})}):Object(f.jsx)("h3",{className:"content-message",children:"None selected"})]})}n(74);var F=n.p+"static/media/hamburger.2a7fc546.svg";function T(e){var t=e.imagesrc,n=e.label,c=e.isSelected;return Object(f.jsxs)("div",{className:"sidebar-item ".concat(c?"active":""),children:[Object(f.jsx)("img",{src:t,alt:"icon",className:"icon"}),Object(f.jsx)("div",{className:"label",children:n})]})}n(75);var D=n.p+"static/media/playlist.8b5736a2.svg";function G(e){var t=e.selected,n=e.select,r=e.addMood,s=e.hideSidebar,a=e.gettingMoods,i=e.moods,d=Object(c.useState)(!1),p=Object(l.a)(d,2),j=p[0],m=p[1];function h(){try{null!==s&&s()}catch(e){}}return Object(f.jsxs)("div",{id:"sidebar",children:[Object(f.jsx)("span",{onClick:function(){return m((function(e){return!e}))},className:"sidebar-item-container",children:Object(f.jsx)(T,{label:"Music",imagesrc:D,isSelected:j})}),j?a?Object(f.jsx)(b,{}):Object(f.jsx)("div",{className:"moods-container",children:function(){var e=i.map((function(e){return Object(f.jsx)(P,{select:n,_hideSidebar:h,selected:t,mood:e},e)}));return e.push(Object(f.jsx)("span",{onClick:function(){v.textInputAlert("Enter the name of the mood",function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=10;break}if(t=t.toLowerCase(),i.includes(t)){e.next=9;break}return e.next=5,z.addMood(t);case 5:(n=e.sent).success?(v.successAlert(n.message),r(n.data)):v.errorAlert(n.message),e.next=10;break;case 9:v.errorAlert("".concat(t," mood already exists"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:Object(f.jsx)(T,{imagesrc:x,label:"Add Mood",isSelected:!1})},"addMood")),e}()}):""]})}function P(e){var t=e.select,n=e._hideSidebar,c=e.selected,r=e.mood;return Object(f.jsx)("span",{onClick:function(){t(r),n()},className:"sidebar-item-container",children:Object(f.jsx)(T,{label:r,imagesrc:D,isSelected:c===r})})}function q(e){var t=e.select,n=e.selected,c=e.moods,r=e.addMood,s=e.gettingMoods;return Object(f.jsxs)("div",{id:"navbar",children:[Object(f.jsx)("h2",{children:"Lofi Moods Dashboard"}),Object(f.jsx)("img",{src:F,title:"nav",alt:"nav",className:"icon clickable hamburger",onClick:function(){return v.getById("sidebar").style.width="80vw",void(v.getById("overlay").style.width="100vw")}}),Object(f.jsx)("div",{id:"overlay",onClick:function(){return v.getById("sidebar").style.width="0vw",void(v.getById("overlay").style.width="0vw")}}),Object(f.jsx)(G,{selected:n,select:t,moods:c,addMood:r,gettingMoods:s})]})}var R=n(43),W=n(8),_=n(12);Object(R.a)({apiKey:"AIzaSyDl1rXG54RQlR7FnxPct8oLKYNkurrwNMY",authDomain:"lofi-moods.firebaseapp.com",projectId:"lofi-moods",storageBucket:"lofi-moods.appspot.com",messagingSenderId:"474872717326",appId:"1:474872717326:web:6284da735dc0392f4f5c5f",measurementId:"G-3LQDEFT82T"});var z=new function e(){var t=this;Object(h.a)(this,e),this.firestore=Object(_.f)(),this.addMusic=function(){var e=Object(u.a)(o.a.mark((function e(n){var c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.a)(Object(_.b)(t.firestore,n.mood),n);case 3:r=e.sent,c={message:"".concat(n.title," added succesfully"),success:!0,data:Object(C.a)({id:r.id},n)},e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c={message:"failed to add ".concat(n.title),success:!1};case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.deleteMusic=function(){var e=Object(u.a)(o.a.mark((function e(n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=Object(_.b)(t.firestore,n.mood),e.next=4,Object(_.c)(Object(_.d)(c,n.id));case 4:return e.abrupt("return",{message:"".concat(n.title," deleted succesfully"),success:!0});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{message:"Failed to delete ".concat(n.title,": ").concat(e.t0),success:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.fetchMusic=function(){var e=Object(u.a)(o.a.mark((function e(n){var c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.e)(Object(_.b)(t.firestore,n));case 3:return c=e.sent,r=[],c.forEach((function(e){var t=e.data();t.id=e.id,r.push(t)})),e.abrupt("return",{message:"".concat(n," music fetched"),success:!0,data:r});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{message:"Failed to fetch music: ".concat(e.t0),success:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),this.fetchMoods=Object(u.a)(o.a.mark((function e(){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.e)(Object(_.b)(t.firestore,"moods"));case 3:return n=e.sent,c=[],n.forEach((function(e){var t=e.data();c.push(t.name)})),e.abrupt("return",{message:"Moods fetched",success:!0,data:c});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{message:"Failed to fetch Moods: ".concat(e.t0),success:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),this.updateMusic=function(){var e=Object(u.a)(o.a.mark((function e(n,c,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.h)(Object(_.d)(Object(_.b)(t.firestore,n.mood),n.id),Object(W.a)({},c,r));case 3:return e.abrupt("return",{message:"".concat(n.title," updated succesfully"),success:!0});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{message:"Failed to update ".concat(n.title,": ").concat(e.t0),success:!1});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,c){return e.apply(this,arguments)}}(),this.deleteMood=function(){var e=Object(u.a)(o.a.mark((function e(n){var c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=Object(_.b)(t.firestore,"moods"),e.next=4,Object(_.e)(Object(_.g)(c,Object(_.i)("name","==",n)));case 4:return r=e.sent.docs[0].id,e.next=7,Object(_.c)(Object(_.d)(c,r));case 7:return t.deleteCollection(n),t.deleteCollection("".concat(n,"_chatroom")),e.abrupt("return",{message:"".concat(n," successfully deleted"),success:!0});case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",{message:"Failed to delete ".concat(n,": ").concat(e.t0),success:!1});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),this.addMood=function(){var e=Object(u.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.a)(Object(_.b)(t.firestore,"moods"),{name:n});case 3:return e.abrupt("return",{message:"".concat(n," successfully added"),success:!0,data:n});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{message:"Failed to add ".concat(n,": ").concat(e.t0," "),success:!1});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),this.deleteCollection=function(){var e=Object(u.a)(o.a.mark((function e(n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.e)(Object(_.b)(t.firestore,n));case 3:if(!((c=e.sent).size>0)){e.next=7;break}return e.next=7,new Promise((function(e){return c.forEach(function(){var c=Object(u.a)(o.a.mark((function c(r){return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(_.c)(Object(_.d)(Object(_.b)(t.firestore,n),r.id));case 2:e(!0);case 3:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}())}));case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()};function J(){var e=Object(c.useState)(void 0),t=Object(l.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)([]),a=Object(l.a)(s,2),i=a[0],d=a[1],b=Object(c.useState)(!1),p=Object(l.a)(b,2),j=p[0],m=p[1],h=function(e){return r((function(){return e}))},O=function(e){return d((function(t){return t.concat(e)}))};return Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m((function(){return!0})),e.next=3,z.fetchMoods();case 3:(t=e.sent).success?d((function(){return t.data})):v.errorAlert(t.message),m((function(){return!1}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(f.jsxs)("div",{id:"app",children:[Object(f.jsx)(q,{selected:n,select:h,moods:i,addMood:O,gettingMoods:j}),Object(f.jsxs)("main",{children:[Object(f.jsx)(G,{selected:n,select:h,moods:i,addMood:O,gettingMoods:j}),Object(f.jsx)(L,{selected:n,deleteMoodFromState:function(e){d((function(){return i.filter((function(t){return t!==e}))})),h(void 0)}})]})]})}var K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};a.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(J,{})}),document.getElementById("root")),K()}},[[76,1,2]]]);
//# sourceMappingURL=main.e1896124.chunk.js.map